<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/general :: head}"></head>

<body>

<header th:insert="~{fragments/navbar :: guest-ul}"></header>

<main>
    <div>
        <h1>My site will be here</h1>
        <p>L'architecture est le jeu savant, correct et magnifique des volumes...</p>
    </div>
    <form class="mx-auto w-25" th:method="post" th:action="@{|/${@localeService.getLocale()}/admin/articles/create|}" th:object="${articleBinding}">

        <div class="form-group">
            <label for="cat">Category</label>
            <select name="categoryId" class="form-control" id="cat" th:value="${categoryId}">
                <option th:value="${categoryId}" selected></option>
            </select>
        </div>

        <div class="form-group" th:classappend="${#fields.hasErrors('country')} ? 'text-danger'">
            <label for="lang" th:text="#{lang.country}"></label>

            <select name="country" class="form-control" id="lang" th:field="${articleBinding.country}">
                <option th:each="countryCode : ${T(architecture.domain.CountryCodes).values()}"
                        th:value="${countryCode}"
                        th:text="#{${'lang.' + countryCode }}"
                        th:selected="${#strings.equals(articleBinding.getCountry(), countryCode) ? true : false}">
                </option>
            </select>
            <small th:each="error : ${#fields.errors('country')}" th:utext="${error +'<br>'}"></small>
        </div>

        <div class="form-group" th:classappend="${#fields.hasErrors('title')} ? 'text-danger'">
            <label for="title" th:text="#{article.title}"></label>
            <input type="text" class="form-control"
                   th:field="*{title}" th:value="${articleBinding.title}"
                   id="title" th:placeholder="#{article.title}+'...'" name="title"
                   required pattern="^.{2,}$" title="Please enter at least 2 characters">

            <small th:each="error : ${#fields.errors('title')}" th:utext="${error +'<br>'}"></small>
        </div>

        <div class="form-group" th:classappend="${#fields.hasErrors('content')} ? 'text-danger'">
            <label for="content" th:text="#{article.content}"></label>
            <input type="text" class="form-control"
                   th:field="*{content}" th:value="${articleBinding.content}"
                   id="content" th:placeholder="#{article.content}" name="content"
                   required pattern="^.{2,}$" title="Please enter at least 2 characters">

            <small th:each="error : ${#fields.errors('content')}" th:utext="${error +'<br>'}"></small>
        </div>

        <div class="form-group" th:classappend="${#fields.hasErrors('mainImage.url')} ? 'text-danger'">
            <label for="mainImageUrl">Main image url</label>
            <input type="text" class="form-control"
                   th:field="*{mainImage.url}" th:value="${articleBinding.mainImage.url}"
                   id="mainImageUrl" th:placeholder="${'Enter url'}" name="mainImageUrl">
            <small th:each="error : ${#fields.errors('mainImage.url')}" th:utext="${error +'<br>'}"></small>
        </div>

        <div class="form-group" th:classappend="${#fields.hasErrors('mainImage.name')} ? 'text-danger'">
            <label for="mainImageName">Image name</label>
            <input type="text" class="form-control"
                   th:field="*{mainImage.name}" th:value="${articleBinding.mainImage.name}"
                   id="mainImageName" th:placeholder="${'Enter name'}" name="mainImageName">

            <small th:each="error : ${#fields.errors('mainImage.name')}" th:utext="${error +'<br>'}"></small>
        </div>

        <div class="button-holder mt-4 d-flex justify-content-center">
            <button type="submit" class="btn btn-info">Add Article</button>
        </div>
    </form>
</main>

<footer th:replace="~{fragments/general :: footer}"></footer>
<script type="module" th:src="@{/js/article.js}"></script>

</body>
</html>